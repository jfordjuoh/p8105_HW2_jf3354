---
title: "p8105_hw2_jf3354"
author: Judy Fordjuoh
date: October 2, 2021
output: github_document
---
###PROBLEM ONE
##Creating the dataframe
  
```{r}
library(tidyverse)
library(readxl)
library(haven)
library(dplyr)
```

##This was the pathname i wanted to use import the Mr.Trash file and it didnt work. Kept saying Error: 'path' does not exist. Why? 1. TW_df = read_excel("./Data Science/p8105_HW2_jf3354/MrTrash.xlsx", sheet = 'MrTrashWheel') 2. TW_df = read_excel("./p8105_HW2_jf3354/MrTrash.xlsx", sheet = 'MrTrashWheel') 

#what exactly is dumpster-specific data? I removed all the total rows


##Problem 1
```{r}
TW_df = read_excel("MrTrash.xlsx", sheet = 'MrTrashWheel', range = 'A2:N408') %>%
    janitor::clean_names() %>%
    mutate(sports_balls = round(sports_balls)) %>%
    drop_na(dumpster) #dropping all the rows in dumpster that has a NA
    
summary(TW_df)
skimr::skim(TW_df)
```

```{r}
prep_2019 = read_excel("MrTrash.xlsx", sheet = '2019 Precipitation',range = 'A2:B14') %>%
  drop_na() %>%
  mutate(year = "2019")
   
prep_2018 = read_excel("MrTrash.xlsx", sheet = '2018 Precipitation', range = 'A2:B14') %>%  
    mutate(year = "2018")
    
##I also got rid of the last row which was the total precipitations

precip18_19 = 
  bind_rows(prep_2019, prep_2018) %>%
  arrange(year,Month, Total) %>% 
  mutate(Month = month.name[Month]) 

summary(precip18_19)
skimr::skim(precip18_19)
```

### Question: Write a paragraph about these data; you are encouraged to use inline R. Be sure to note the number of observations in both resulting datasets, and give examples of key variables. For available data, what was the total precipitation in 2018? What was the median number of sports balls in a dumpster in 2019? ANSWER THIS




##Problem 2  COME BACK AND DO A LEFT MERGE
#President: 1=Democrat 0=Repubs
```{r}
p_m = read_csv("pols-month.csv") %>%
  separate(mon, c("year", "Month", "Day")) %>%
  mutate(year = as.numeric(year)) %>%
  mutate(Month = month.name[as.numeric(Month)]) %>%
  mutate(president = ifelse(is.na(prez_dem), prez_gop, prez_dem )) %>%
  select(-prez_dem, -prez_gop, -Day)

s_np = read_csv("snp.csv") %>%
  separate(date, c("Day", "Month", "year")) %>%
  mutate(year = as.numeric(year)) %>%
  mutate(year = if_else(year >= 50,
                        year + 1900,
                        year + 2000)) %>%
  arrange(year,Month) %>% 
  mutate(Month = (month.name[as.numeric(Month)])) %>%
  select(year, Month, everything()) 

pmsnp_df1 = 
  full_join(p_m, s_np, by = c("year", "Month"))

un_emp = read_csv("unemployment.csv") 
un_emp_tidy = un_emp %>%
  pivot_longer(
    Jan:Dec, 
    names_to = 'Month',
    values_to = 'Percentage'
  ) %>%
  mutate(
    Month = recode(Month, 
         Jan = "January",
         Feb = "February",
         Mar = "March",
         Apr = "April",
         Jun = "June",
         Jul = "July",
         Aug = "August",
         Sep = "September",
         Oct = "October",
         Nov = "November",
         Dec = "December")
  ) %>%
  rename(year = Year)

finalQ2_df = 
  full_join(pmsnp_df1, un_emp_tidy, by = c("year", "Month"))

#do a left join instead

```

##Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).

##Problem 3

```{r}
pbn = read_csv("Popular_Baby_Names.csv") %>%
  distinct() %>% 
  janitor::clean_names() %>%
  mutate(childs_first_name = toupper(childs_first_name)) %>%
  mutate(
    ethnicity = recode(ethnicity, 
         "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER",
         "BLACK NON HISP" = "BLACK NON HISPANIC",
         "WHITE NON HISP" = "WHITE NON HISPANIC"
        )) 
  
olivia_pbn = pbn %>%
filter(childs_first_name == "OLIVIA") %>%  
select(-gender, -childs_first_name, -count) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "rank") %>%
relocate(ethnicity, "2011","2012","2013","2014","2015")

```

```{r}
#table for the MALES
#filter(pbn, gender == "MALE", rank == "1", year_of_birth == "2010")
#After filtering the dataset by gender (Male), rank (1), and by year (ran individually from year 2011-2016), the name Jayden was ranked first at least by one ethnicity from the years 2011-2015 which makes it the most popular name in this dataset.

jayden_pbn = pbn %>%
filter(childs_first_name == "JAYDEN") %>%  
select(-gender, -childs_first_name, -count) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "rank") %>%
relocate(ethnicity, "2011","2012","2013","2014","2015")
```


```{r}
babynamef = filter(pbn, gender == "MALE", ethnicity == "WHITE NON HISPANIC", year_of_birth == "2016") 
p <- ggplot(babynamef , aes(x = rank, y = count)) +   geom_point(alpha = 0.5) + ggtitle("Popular Names in White Non-Hispanic Male Children, 2016") 

print(p)

ggsave("JF_DSHW2_scatterplot.pdf", height = 10, width = 6)

```

